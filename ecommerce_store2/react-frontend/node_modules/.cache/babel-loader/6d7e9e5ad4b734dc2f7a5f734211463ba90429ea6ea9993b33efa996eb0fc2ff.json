{"ast":null,"code":"import axios from'axios';import React,{useState}from'react';import{useNavigate}from'react-router-dom';import Swal from'sweetalert2';//import header and footer\nimport Header from'./header';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";axios.defaults.withCredentials=true;const Login=()=>{const navigate=useNavigate();const[loginInput,setLogin]=useState({email:'',password:''});const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleInput=e=>{setLogin({...loginInput,[e.target.name]:e.target.value});};const submitLogin=async e=>{e.preventDefault();setLoading(true);const data={email:loginInput.email,password:loginInput.password};try{// Attempt to get CSRF cookie\n//await axios.get('http://localhost:8000/sanctum/csrf-cookie');\n// Proceed with the login request\nconst res=await axios.post('http://localhost:8000/api/login',data);if(res.data.status===200){// Successful login\nlocalStorage.setItem('auth_token',res.data.token);axios.defaults.headers.common['Authorization']=\"Bearer \".concat(res.data.token);localStorage.setItem('auth_name',res.data.username);localStorage.setItem('user',JSON.stringify(res.data.user));Swal.fire('Success',res.data.message,'success');navigate('/dashboard');// Redirect to the root path\n}else if(res.data.status===401){// Unauthorized status, handle accordingly\nsetError(res.data.message);}else{// Handle unexpected response\nconsole.error('Unexpected response from login request',res);}}catch(error){// Handle any errors that occurred during the requests\nsetError('An error occurred during login. Please try again.');console.error('Error during login request',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitLogin,method:\"POST\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Login\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",onChange:handleInput,value:loginInput.email,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",onChange:handleInput,value:loginInput.password,className:\"form-control\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?'Logging in...':'Submit'})]})]})});};export default Login;","map":{"version":3,"names":["axios","React","useState","useNavigate","Swal","Header","jsx","_jsx","jsxs","_jsxs","defaults","withCredentials","Login","navigate","loginInput","setLogin","email","password","loading","setLoading","error","setError","handleInput","e","target","name","value","submitLogin","preventDefault","data","res","post","status","localStorage","setItem","token","headers","common","concat","username","JSON","stringify","user","fire","message","console","children","onSubmit","method","className","type","onChange","disabled"],"sources":["E:/xampp/htdocs/react/whole project/react-frontend/src/components/login.js"],"sourcesContent":["import axios from 'axios';\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport Swal from 'sweetalert2';\n//import header and footer\nimport Header from './header';\naxios.defaults.withCredentials = true;\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const [loginInput, setLogin] = useState({\n    email: '',\n    password: '',\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleInput = (e) => {\n    setLogin({ ...loginInput, [e.target.name]: e.target.value });\n  };\n\n  const submitLogin = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    const data = {\n      email: loginInput.email,\n      password: loginInput.password,\n    };\n\n    try {\n      // Attempt to get CSRF cookie\n      //await axios.get('http://localhost:8000/sanctum/csrf-cookie');\n\n      // Proceed with the login request\n      const res = await axios.post('http://localhost:8000/api/login', data);\n\n      if (res.data.status === 200) {\n        // Successful login\n        localStorage.setItem('auth_token', res.data.token);\n        axios.defaults.headers.common['Authorization'] = `Bearer ${res.data.token}`;\n        localStorage.setItem('auth_name', res.data.username);\n        localStorage.setItem('user', JSON.stringify(res.data.user));\n        Swal.fire('Success', res.data.message, 'success');\n        navigate('/dashboard'); // Redirect to the root path\n      } else if (res.data.status === 401) {\n        // Unauthorized status, handle accordingly\n        setError(res.data.message);\n      } else {\n        // Handle unexpected response\n        console.error('Unexpected response from login request', res);\n      }\n    } catch (error) {\n      // Handle any errors that occurred during the requests\n      setError('An error occurred during login. Please try again.');\n      console.error('Error during login request', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      <form onSubmit={submitLogin} method=\"POST\">\n        <Header />\n        <div className=\"card-header\">\n          <h4>Login</h4>\n        </div>\n        <div className=\"card-body\">\n          <div className=\"form-group mb-3\">\n            <label>Email address</label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              onChange={handleInput}\n              value={loginInput.email}\n              className=\"form-control\"\n            />\n          </div>\n          <div className=\"form-group mb-3\">\n            <label>Password</label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              onChange={handleInput}\n              value={loginInput.password}\n              className=\"form-control\"\n            />\n          </div>\n          {error && <div className=\"alert alert-danger\">{error}</div>}\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\n            {loading ? 'Logging in...' : 'Submit'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}